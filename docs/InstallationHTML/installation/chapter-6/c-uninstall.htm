<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="concept" name="DC.Type" />
<meta name="DC.Title" content="Automatically Uninstalling CLC" />
<meta content="XHTML" name="DC.Format" />
<meta content="About" name="DC.Identifier" />
<meta content="en-us" name="DC.Language" />
<link href="../../commonltr.css" type="text/css" rel="stylesheet" />
<link href="../../book.css" type="text/css" rel="stylesheet" />
<title>Automatically Uninstalling CLC</title>
</head>
<body id="About">


    <h1 class="topictitle1">Automatically Uninstalling <span>CLC</span></h1>

    <div>
        <div class="section">
            <p><span>CLC</span> comes with an Ansible playbook for uninstalling the <span>CLC</span> Horizon plugin, the CentOS Atomic host image, and the Heat orchestration templates. </p>

            <div class="p">
                <div class="note"><span class="notetitle">Note:</span> You need the same configuration file (<samp class="codeph">wlm-config.yaml</samp>) for uninstalling that you used for automatically installing <span>CLC</span>. For details, refer to <a href="../chapter-3/c-install.htm">Automatically Installing CLC</a>.</div>

            </div>

        </div>

        <div class="section">Run the <span>CLC</span> uninstaller as follows: <div class="p">
                <ol>
                    <li>Go to the <samp class="codeph">&lt;InstDir&gt;/auto-installation</samp> folder.</li>

                    <li>You need the following information at hand:<ul>
                            <li>IP address or host name of the OpenStack host where the Horizon service is running.</li>

                            <li>The private key or the password of the installing user to be able to access the OpenStack host via SSH.</li>

                            <li>The <samp class="codeph">wlm-config.yaml</samp> configuration file used for automatically installing <span>CLC</span>. </li>

                        </ul>
</li>

                    <li>
                        <p>Run the <samp class="codeph">wlm-plugin-uninstall.yaml</samp> Ansible playbook:</p>

                        <div class="p">
                            
<div class="tablenoborder"><table summary="" cellspacing="0" cellpadding="4" frame="void" border="1" rules="all">
                                    
                                    <tbody>
                                        <tr>
                                            <td class="nocellnorowborder" valign="top" width="100%">
                                                <pre class="codeblock">ansible-playbook \
   -i &lt;horizon host&gt;, \
   -u &lt;login user&gt; \
      --private-key &lt;path of openstack ssh-key&gt; | -k \
   [-b --become-user &lt;OpenStack CLI User&gt; \
       --become-method=sudo --ask-become-pass \]
   wlm-plugin-uninstall.yaml</pre>

                                            </td>

                                        </tr>

                                    </tbody>

                                </table>
</div>

                        </div>

                    </li>

                </ol>

            </div>
</div>

        <div class="section">
            <div class="p">The options above have the following meaning: <ul>
                    <li><samp class="codeph">-i &lt;horizon host&gt;</samp><div class="p">
                            <ul>
                                <li>Specify the IP address or host name of your the OpenStack host on which the Horizon service is running.</li>

                                <li>Make sure to enter a comma after the IP address or host name, and to enter a blank after the comma.</li>

                            </ul>

                        </div>
</li>

                    <li><samp class="codeph">-u &lt;login user&gt; --private-key &lt;path of openstack ssh-key&gt; | -k</samp><ul>
                            <li>Specify the user name of the OpenStack administrator running the installation script. </li>

                            <li>The path of the OpenStack SSH key is the path to the file containing the private key of the above administrator and is required so that the administrator can access the OpenStack instance via SSH.</li>

                            <li>If you want to use a password, specify the <samp class="codeph">-k</samp> option instead of <samp class="codeph">--private-key</samp>. You will be prompted for the SSH password instead of assuming key-based authentication with the SSH agent.</li>

                        </ul>
</li>

                    <li><samp class="codeph">[-b --become-user &lt;OpenStack CLI User&gt; --become-method=sudo --ask-become-pass]</samp><div class="p">
                            <ul>
                                <li>Specify the user who is able to execute commands from the OpenStack command-line interface (CLI). This user has superuser privileges (the root user)  in OpenStack.</li>

                                <li>If the system is configured such that <samp class="codeph">sudo</samp> commands require a password, the <samp class="codeph">--ask-become-pass</samp> option ensures that the root user is prompted for his password. </li>

                                <li>If you omit the options, the user specified with the <samp class="codeph">-u</samp> option can execute OpenStack CLI commands.</li>

                            </ul>

                        </div>
</li>

                </ul>
</div>

            <p>Example 1: </p>

            <div class="p">
                
<div class="tablenoborder"><table summary="" cellspacing="0" cellpadding="4" frame="void" border="1" rules="all">
                        
                        <tbody>
                            <tr>
                                <td class="nocellnorowborder" valign="top" width="100%">
                                    <pre class="codeblock">ansible-playbook \
   -i 10.234.10.300, \
   -u admin --private-key usr/bin/admin.key \
   wlm-plugin-uninstall.yaml</pre>

                                </td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

            <p>Example 2:</p>

            <div class="p">
                
<div class="tablenoborder"><table summary="" cellspacing="0" cellpadding="4" frame="void" border="1" rules="all">
                        
                        <tbody>
                            <tr>
                                <td class="nocellnorowborder" valign="top" width="100%">
                                    <pre class="codeblock">ansible-playbook \
   -i 10.140.18.49, \
   -u osp7 \
   -k \
   -b --become-user root --become-method=sudo --ask-become-pass \
   wlm-plugin-uninstall.yaml</pre>

                                </td>

                            </tr>

                        </tbody>

                    </table>
</div>

            </div>

        </div>

        <div class="section"><h4 class="sectiontitle">Results</h4>
            
            <div class="p">
                <ul>
                    <li>The <span>CLC</span> Horizon plugin and the <span>CLC</span> Heat orchestration templates are removed. </li>

                    <li>The CentOS Atomic host image for cluster nodes is deregistered and removed from your OpenStack environment.</li>

                    <li>
                        <p>The <samp class="codeph">/wlm</samp> subfolder to which the <span>CLC</span> Horizon plugin was installed is removed.  </p>

                    </li>

                    <li>Existing clusters are not affected. The nodes can still be accessed using <samp class="codeph">kubectl</samp> commands.</li>

                </ul>

            </div>

            <div class="p">
                <div class="note"><span class="notetitle">Note:</span> If the <samp class="codeph">wlm-config.yaml</samp> configuration file contains incorrect values, for example, a non-existing path to where the OpenStack dashboard is installed, the installation procedure is aborted. You can then correct the <samp class="codeph">wlm-config.yaml</samp>  and run the uninstaller again; or you can proceed with manually uninstalling the <span>CLC</span> components as described in <a href="../chapter-6b/c-uninstall.htm">Manually Uninstalling CLC</a>.</div>

            </div>

        </div>

    </div>


</body>
</html>